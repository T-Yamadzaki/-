const questions = [
    // Открытость опыту
    { text: "Я люблю узнавать новое и пробовать необычные вещи.", category: "openness" },
    { text: "Меня интересуют творческие или интеллектуальные занятия.", category: "openness" },
    { text: "Я часто ищу новые идеи и необычные подходы.", category: "openness" },

    // Добросовестность
    { text: "Я организован(а) и всегда довожу дела до конца.", category: "conscientiousness" },
    { text: "Я всегда стараюсь выполнить обещанное.", category: "conscientiousness" },
    { text: "Я аккуратен(а) и предпочитаю порядок в делах.", category: "conscientiousness" },

    // Экстраверсия
    { text: "Мне нравится находиться в обществе и быть в центре внимания.", category: "extraversion" },
    { text: "Я чувствую себя энергичным(ой) и уверенным(ой) в больших группах людей.", category: "extraversion" },
    { text: "Я охотно иду на новые знакомства.", category: "extraversion" },

    // Доброжелательность
    { text: "Я стараюсь понять и поддержать других людей.", category: "agreeableness" },
    { text: "Я легко иду на компромисс, чтобы поддерживать хорошие отношения.", category: "agreeableness" },
    { text: "Мне нравится помогать другим, когда у меня есть возможность.", category: "agreeableness" },

    // Нейротизм
    { text: "Я чувствую себя уязвимым(ой) и легко поддаюсь стрессу.", category: "neuroticism" },
    { text: "Я часто переживаю из-за различных мелочей.", category: "neuroticism" },
    { text: "В стрессовых ситуациях я чувствую сильное беспокойство.", category: "neuroticism" }
];

let currentQuestion = 0;
const answers = {
    openness: 0,
    conscientiousness: 0,
    extraversion: 0,
    agreeableness: 0,
    neuroticism: 0
};

function startTest() {
    document.getElementById("welcome-container").classList.add("hidden");
    document.getElementById("question-container").classList.remove("hidden");
    showQuestion();
}

function showQuestion() {
    document.getElementById("question-text").textContent = questions[currentQuestion].text;
}

function nextQuestion() {
    const selectedAnswer = document.querySelector('input[name="answer"]:checked');
    if (!selectedAnswer) {
        alert("Выберите вариант ответа, чтобы продолжить!");
        return;
    }

    answers[questions[currentQuestion].category] += parseInt(selectedAnswer.value);
    selectedAnswer.checked = false;
    currentQuestion++;

    if (currentQuestion < questions.length) {
        showQuestion();
    } else {
        showResults();
    }
}

function showResults() {
    document.getElementById("question-container").classList.add("hidden");
    document.getElementById("result-container").classList.remove("hidden");

    const resultText = generateInterpretation();
    document.getElementById("result-text").innerHTML = resultText;
}
function generateInterpretation() {
    const interpretations = {
        openness: {
            low: "Открытость опыту: Вы менее склонны к поиску новых впечатлений и идей. Вам может быть комфортнее с привычными методами и распорядками, что помогает сохранять стабильность. Рекомендация: попробуйте открываться новым идеям, это может дать вдохновение и свежие перспективы.",
            medium: "Открытость опыту: Вы открыты к новому, но в пределах комфортного. Вам нравятся разнообразие и новые идеи, но вы не всегда склонны к экспериментам. Рекомендация: иногда позволяйте себе рисковать и пробовать что-то новое, это может расширить ваши горизонты.",
            high: "Открытость опыту: Вы активно стремитесь к новым идеям и впечатлениям. Вы творческая личность, обладающая богатым воображением и способностью находить необычные решения. Рекомендация: продолжайте развивать свою открытость, это поможет вам оставаться креативным и вдохновленным."
        },
        conscientiousness: {
            low: "Добросовестность: У вас менее выражена склонность к организованности и целеустремленности. Вы можете быть гибким и быстро адаптироваться, но иногда вам не хватает последовательности. Рекомендация: старайтесь больше планировать задачи и держаться поставленных целей.",
            medium: "Добросовестность: Вы стремитесь к организованности и ответственности, но не всегда следуете строгим правилам. Это позволяет вам сохранять баланс между структурой и гибкостью. Рекомендация: определите ключевые задачи и придерживайтесь их для большей продуктивности.",
            high: "Добросовестность: Вы очень организованный и ответственный человек. Вы всегда доводите дела до конца и строго следуете поставленным целям. Рекомендация: используйте свою организованность для достижения более амбициозных целей и улучшения своей дисциплины."
        },
        extraversion: {
            low: "Экстраверсия: Вы более склонны к уединению и предпочитаете спокойные ситуации. Вам не всегда комфортно в больших группах и публичных мероприятиях. Рекомендация: поддерживайте баланс между временем в одиночестве и общением с другими, это поможет сохранить энергию.",
            medium: "Экстраверсия: Вам нравится быть среди людей, но вы не всегда стремитесь к этому. Вы сохраняете баланс между общительностью и временем для себя. Рекомендация: попробуйте развивать свои социальные навыки, это может быть полезно в построении контактов.",
            high: "Экстраверсия: Вы энергичный и общительный человек, которому нравится быть в центре внимания. Вы легко находите общий язык с людьми и заряжаете их энергией. Рекомендация: используйте свою экстраверсию для укрепления связей и новых возможностей."
        },
        agreeableness: {
            low: "Доброжелательность: Вы предпочитаете соблюдать дистанцию в общении и больше ориентированы на собственные интересы. Иногда это позволяет сохранять независимость, но может затруднять сотрудничество. Рекомендация: попробуйте больше слушать других и искать компромиссы для улучшения общения.",
            medium: "Доброжелательность: Вы умеете поддерживать хорошие отношения с людьми, но при этом не теряете себя. Вам комфортно помогать другим, но вы не позволяете людям злоупотреблять вашей добротой. Рекомендация: продолжайте развивать свои социальные навыки и доброжелательность.",
            high: "Доброжелательность: Вы очень отзывчивый и эмпатичный человек. Вам нравится поддерживать и помогать другим, а также создавать гармонию в отношениях. Рекомендация: сохраняйте баланс между заботой о других и заботой о себе."
        },
        neuroticism: {
            low: "Нейротизм: Вы эмоционально устойчивы и легко справляетесь со стрессом. Вас сложно выбить из равновесия, что позволяет сохранять спокойствие в сложных ситуациях. Рекомендация: используйте свою устойчивость для поддержки других людей, которые нуждаются в этом.",
            medium: "Нейротизм: Вы можете испытывать беспокойство или стресс в сложных ситуациях, но в целом умеете справляться с эмоциями. Вам удается находить баланс между спокойствием и чувствительностью. Рекомендация: развивайте методы управления стрессом, чтобы улучшить свою эмоциональную устойчивость.",
            high: "Нейротизм: Вы чувствительны к стрессу и легко поддаетесь эмоциям. Это может создавать трудности в напряженных ситуациях. Рекомендация: постарайтесь освоить техники релаксации и управления стрессом, это поможет вам лучше контролировать свои эмоции."
        }
    };

    const resultStrings = [];

    for (const category in answers) {
        let score = answers[category];
        let interpretation = "";

        if (score > 12) {
            interpretation = interpretations[category].high;
        } else if (score > 8) {
            interpretation = interpretations[category].medium;
        } else {
            interpretation = interpretations[category].low;
        }

        resultStrings.push(interpretation);
    }

    return resultStrings.join("<br><br>");
}


function restartTest() {
    currentQuestion = 0;
    for (const category in answers) {
        answers[category] = 0;
    }
    document.getElementById("result-container").classList.add("hidden");
    document.getElementById("welcome-container").classList.remove("hidden");
}
